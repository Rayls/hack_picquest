<!DOCTYPE html>
<html>
    <head>
        <title>{% block title %}{% endblock%}</title>
        <meta charset='utf-8'>

        <link rel='stylesheet' href='bower_components/bootstrap/dist/css/bootstrap.min.css'>
        <link rel='stylesheet' href='site/css/main.less.css'>
        
        <script src='bower_components/jquery/jquery.min.js'></script>

        <link rel="stylesheet" href="bower_components/jquery-mobile-bower/css/jquery.mobile-1.3.2.min.css"/>
        <script src="bower_components/jquery-mobile-bower/js/jquery.mobile-1.3.2.min.js"></script>

        <script type="text/javascript">
            var Clay = Clay || {};
            Clay.gameKey = "piquest";
            Clay.readyFunctions = [];
            Clay.ready = function( fn ) {
                Clay.readyFunctions.push( fn );
            };
            ( function() {
                var clay = document.createElement("script"); clay.async = true;
                clay.src = ( "https:" == document.location.protocol ? "https://" : "http://" ) + "clay.io/api/api.js"; 
                var tag = document.getElementsByTagName("script")[0]; tag.parentNode.insertBefore(clay, tag);
            } )();
        </script>

    </head>
    <body>

        <div data-role="page" id="{% block pageId %}{% endblock %}">
            <div data-theme="a" data-role="header">
                <h3>
                    Piquest
                </h3>
            </div>

            {% block content  %}{% endblock %}

            <div class='pq-row'>
                <div id='pq-menu' class='hidden' data-role="navbar" data-iconpos="top">
                    <ul>
                        <li>
                            <a href="/achievement" data-transition="fade" data-theme="" data-icon="">
                                Acheivement
                            </a>
                        </li>
                        {% block center-btn %}
                        <li>
                            <a href="/home" data-transition="fade" data-theme="" data-icon="">
                             Map
                            </a>
                        </li>
                        {% endblock %}
                        <li>
                            <a href="/profile" data-transition="fade" data-theme="" data-icon="">
                                Me
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        
        </div>

        {% block script %}{% endblock %}

        <script type="text/javascript">

            $(document).on('pageinit', function(){
                Clay.ready(function() {

                    if (!Clay.Player.loggedIn) {

                        if (window.location.pathname !== '/login') {
                            window.location = '/login';
                        }
                    } else {
                        $('#pq-menu').removeClass('hidden');
                    }
                });
            });

        </script>

        <script src='bower_components/bootstrap/dist/js/bootstrap.min.js'></script>
    </body>
</html>
